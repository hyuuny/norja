# norja

> 코틀린을 학습하면서 이전부터 만들어보고 싶던 숙박 예약 시스템 API를 구현해보았습니다.

<br>

## 사용 기술

언어
- `Kotlin`

프레임워크
- `Spring Boot`, `Spring Data`, `Spring Security`

데이터베이스
- `MySQL 5.7`, `H2`

서드파티
- `Redis`, `OpenAPI`, `JWT`

<br>

## 요구사항

### 숙박업체
- 숙박업체 목록을 조회할 수 있어야 한다.
  - 분류별로 조회할 수 있어야 한다.(호텔, 모텔, 호캉스 등)
  - 주소로 조회할 수 있어야 한다.
  - 목록에 후기 개수 및 평균을 조회할 수 있어야 한다.
  - 기간으로 남은 객실의 수를 알 수 있어야 한다.
- 숙박업체를 등록할 수 있어야 한다.
- 숙박업체를 조회할 수 있어야 한다.
  - 잘못된 숙박업체를 조회 요청 했을 때, 예외 메세지를 반환해야 한다.
- 숙박업체를 수정할 수 있어야한다.
  - 잘못된 숙박업체를 수정 요청 했을 때, 예외 메세지를 반환해야 한다.
- 숙박업체의 휴무를 설정할 수 있어야 한다.
- 숙박업체를 삭제할 수 있어야 한다.

<br>

### 객실
- 객실을 등록할 수 있어야 한다.
- 객실을 조회할 수 있어야 한다.
  - 잘못된 객실을 조회 요청 했을 때, 예외 메세지를 반환해야 한다.
- 객실을 수정할 수 있어야 한다.
  - 잘못된 객실을 수정 요청 했을 때, 예외 메세지를 반환해야 한다.
- 객실을 삭제할 수 있어야 한다.

<br>

### 예약
- 예약 목록을 조회할 수 있어야 한다.
  - 특정 고객으로 조회할 수 있어야 한다.
  - 기간으로 조회할 수 있어야 한다.
  - 상태로 조회할 수 있어야 한다.
- 예약을 조회할 수 있어야 한다.
- 예약을 등록 할 수 있어야 한다.
  - 기간 내 남은 객실이 없다면, 예외 메세지를 반환해야 한다.
  - 잘못된 예약내역을 조회 요청 햤을 때, 예외 메세지를 반환해야 한다.
- 예약을 취소할 수 있어야 한다.
  - 잘못된 예약내역을 취소 요청 했을 때, 예외 메세지를 반환해야 한다.


<br>

### 후기
- 후기 목록을 조회할 수 있어야 한다.
  - 숙박 업체에 등록된 후기를 조회할 수 있어야 한다.
  - 객실에 등록된 후기를 조회할 수 있어야 한다.
  - 특정 고객이 등록한 후기를 조회할 수 있어야 한다.
  - 타입으로 조회할 수 있어야 한다.
  - 전체 평점을 기준으로 조회할 수 있어야 한다.
  - 베스트 여부로 조회할 수 있어야 한다.
- 후기를 등록할 수 있어야 한다.
- 후기를 조회할 수 있어야 한다.
  - 잘못된 후기를 조회 요청 했을 때, 예외 메세지를 반환해야 한다.
- 후기를 삭제할 수 있어야 한다.
- 후기를 베스트 설정/해제 설정할 수 있어야 한다.
- 숙박업체에 등록된 후기 평균 점수를 조회할 수 있어야 한다.

<br>

### 카테고리

- 카테고리 목록을 조회할 수 있어야 한다.
- 부모/자녀카테고리를 등록할 수 있어야 한다.
- 부모/자녀 카테고리를 조회할 수 있어야 한다.
  - 잘못된 카테고리를 조회 요청 했을 때, 예외 메세지를 반환해야 한다.
- 카테고리를 수정할 수 있어야 한다.
- 카테고리를 삭제할 수 있어야 한다.

<br>

### 회원
- 회원 목록을 조회할 수 있어야 한다.
  - 특정 고객을 조회할 수 있어야 한다.
  - 상태롤 조회할 수 있어야 한다.
- 로그인할 수 있어야 한다.
- 회원가입 할 수 있어야 한다.
- 고객을 조회할 수 있어야 한다.
  - 잘못된 고객을 조회 요청 했을 때, 예외 메세지를 반환해야 한다.
- 비밀번호를 변경할 수 있어야 한다.
- 동의 여부를 변경할 수 있어야 한다.
- 회원 정보를 변경할 수 있어야 한다.
- 회원 탈퇴를 할 수 있어야 한다.

## 퀵 스타트

- docker-compose 컨테이너 생성

```shell
$ docker compose up -d
```

<br>

- 관리자 Swagger 접속
    - NorjaAdminApplication 실행
    - `localhost:8081/swagger-ui.html` 접속

<br>

- 사용자 Swagger 접속
    - NorjaApplication 실행
    - `localhost:8081/swagger-ui.html` 접속
    - 회원가입 -> 로그인 후, `accessToken` 값 상단의 `Authorize`에 입력

```json
{
  "token": {
    "accessToken": "eyJhbGciOiJIUzI1NiJ9.eyJ0eXBlIjoiSldUIiwiYWxnIjoiSFMyNTYiLCJ1c2VybmFtZSI6Imh5dXVueUBrbm91LmFjLmtyIiwiZXhwIjoxNjYzMTMyNDc5fQ.FaceuQijnJtyR3w8moqbS_s49tZROwtBAD5eWIWsNMU"
  }
}
```

<br>

## 구조

![](../../Desktop/스크린샷 2022-09-19 오전 11.29.23.png)